!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("d3-scale"),require("d3-selection"),require("d3-shape"),require("d3-array"),require("d3-transition")):"function"==typeof define&&define.amd?define(["exports","d3-scale","d3-selection","d3-shape","d3-array","d3-transition"],n):n(t.d3=t.d3||{},t.d3,t.d3,t.d3,t.d3,t.d3)}(this,function(t,n,e,r,i,a){"use strict";var o=function(){function t(t){t.each(function(t){var r,o,c,v,x=e.select(this),b=1/0,q=-1/0,w=-1/0,z=t.map(function(t,n){var e=h.call(this,t,n),r=_.call(this,t,n);return e<b&&(b=e),e>q&&(q=e),-r>w&&(w=-r),r>w&&(w=r),[e,r]}),A=n.scaleLinear().domain([b,q]).range([0,p]),L=n.scaleLinear().domain([0,w]).range([0,g*l]),j=u(l,g,s);this.__chart__?(r=this.__chart__.x,o=this.__chart__.y,c=this.__chart__.t,v=this.__chart__.id):(r=A.copy(),o=L.copy(),c=j,v=++m);var P=x.selectAll("defs").data([null]),M=P.enter().append("defs");M.append("clipPath").attr("id","d3_horizon_clip"+v).append("rect").attr("width",p).attr("height",g),P=P.merge(M),P.select("rect").transition(a.transition()).attr("width",p).attr("height",g),x.selectAll("g").data([null]).enter().append("g").attr("clip-path","url(#d3_horizon_clip"+v+")");var N=x.select("g").selectAll("path").data(i.range(-1,-l-1,-1).concat(i.range(1,l+1)),Number);d&&f.defined(function(n,e){return d.call(this,t[e],e)});var O=f.x(function(t){return r(t[0])}).y0(g*l).y1(function(t){return g*l-o(t[1])})(z),k=f.x(function(t){return A(t[0])}).y1(function(t){return g*l-L(t[1])})(z);N.exit().transition(a.transition()).attr("transform",j).attr("d",k).remove(),N=N.enter().append("path").style("fill",y).attr("transform",c).attr("d",O).merge(N),N.transition(a.transition()).style("fill",y).attr("transform",j).attr("d",k),this.__chart__={x:A,y:L,t:j,id:v}})}function o(t){return t[0]}function c(t){return t[1]}function u(t,n,e){return"offset"==e?function(e){return"translate(0,"+(e+(e<0)-t)*n+")"}:function(e){return(e<0?"scale(1,-1)":"")+"translate(0,"+(e-t)*n+")"}}var d,l=1,s="offset",f=r.area(),h=o,_=c,p=960,g=40,y=n.scaleLinear().domain([-1,0,1]).range(["#d62728","#fff","#1f77b4"]);t.bands=function(n){return arguments.length?(l=+n,y.domain([-l,0,l]),t):l},t.mode=function(n){return arguments.length?(s=n+"",t):s},t.colors=function(n){return arguments.length?(y.range(n),t):y.range()},t.x=function(n){return arguments.length?(h=n,t):h},t.y=function(n){return arguments.length?(_=n,t):_},t.width=function(n){return arguments.length?(p=+n,t):p},t.height=function(n){return arguments.length?(g=+n,t):g},t.defined=function(n){return arguments.length?(d=n,t):d},t.curve=function(n){return arguments.length?(f.curve(n),t):f.curve};var m=0;return t};t.horizon=o,Object.defineProperty(t,"__esModule",{value:!0})});